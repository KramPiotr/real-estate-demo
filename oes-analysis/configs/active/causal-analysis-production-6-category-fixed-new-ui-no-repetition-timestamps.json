{
    "transcripts_directory": "test-transcripts",
    "output_directory": "multi_agent_responses",
    "input_catalog": {
        "name": "behaviour",
        "location": "causals",
        "types": [
            "opportunity","definition"
        ]
    },
    "nodes": [
        {
            "name": "trigger_identification",
            "inputs": [
                "transcript",
                "behaviour-opportunity"
            ],
            "models": [
                {
                    "provider": "azure"
                }
            ]
        },
        {
            "name": "response_analysis",
            "inputs": [
                "transcript",
                "behaviour-definition",
                "trigger_identification"
            ],
            "models": [
                {
                    "provider": "azure"
                }
            ]
        },
        {
            "name": "response_accuracy",
            "inputs": [
                "transcript",
                "behaviour-definition",
                "response_analysis"
            ],
            "models": [
                {
                    "provider": "azure"
                }
            ]
        },
        {
            "name": "condense_analysis",
            "inputs": [
                "transcript",
                "behaviour-opportunity",
                "behaviour-definition",
                "response_accuracy"
            ],
            "models": [
                {
                    "provider": "azure"
                }
            ],
            "response_format_schema": {
                "type": "object",
                "properties": {
                    "call_id": {
                        "type": "string",
                        "description": "12-digit call identifier"
                    },
                    "opportunities": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "pattern_name": {
                                    "type": "string",
                                    "description": "Pattern type (e.g., 'closing_behaviors', 'objection_handling')"
                                },
                                "component_name": {
                                    "type": "string",
                                    "description": "Component name (e.g., 'teaching_period_confirmation', 'confidence_issues')"
                                },
                                "id": {
                                    "type": "integer",
                                    "description": "Unique opportunity ID"
                                },
                                "title": {
                                    "type": "string",
                                    "description": "Opportunity title from previous layer"
                                },
                                "opportunity_score": {
                                    "type": "string",
                                    "description": "Opportunity quality score (e.g., '4.7/5')"
                                },
                                "response_score": {
                                    "type": "string",
                                    "description": "Consultant response quality score (e.g., '2.8/5')"
                                },
                                "tag": {
                                    "type": "string",
                                    "enum": ["negative", "positive"],
                                    "description": "Overall effectiveness tag"
                                },
                                "condensed_opportunity_headline": {
                                    "type": "string",
                                    "description": "Punchy 1-2 sentence headline describing the opportunity"
                                },
                                "condensed_opportunity_quote": {
                                    "type": "string",
                                    "description": "Student quote that triggered the opportunity, wrapped in << >>"
                                },
                                "condensed_response_quote": {
                                    "type": "string",
                                    "description": "Consultant's actual response quote, wrapped in << >>"
                                },
                                "condensed_actual_response": {
                                    "type": "string",
                                    "description": "3-4 sentence analysis of what consultant actually did"
                                },
                                "condensed_recommended_response": {
                                    "type": "string",
                                    "description": "REQUIRED when tag is 'negative': recommended alternative approach with example quotes in << >>. OMIT when tag is 'positive'."
                                },
                                "condensed_why_this_was_good": {
                                    "type": "string",
                                    "description": "REQUIRED when tag is 'positive': explanation of why the response was effective. OMIT when tag is 'negative'."
                                },
                                "detailed_opportunity_headline": {
                                    "type": "string",
                                    "description": "Expanded 2-3 sentence headline with more context"
                                },
                                "detailed_opportunity_quote": {
                                    "type": "string",
                                    "description": "Extended student quote with more context, wrapped in << >>"
                                },
                                "detailed_response_quote": {
                                    "type": "string",
                                    "description": "Extended consultant response quote with context, wrapped in << >>"
                                },
                                "detailed_actual_response": {
                                    "type": "string",
                                    "description": "Comprehensive analysis of consultant's behavior and effectiveness"
                                },
                                "detailed_recommended_response": {
                                    "type": "string",
                                    "description": "REQUIRED when tag is 'negative': detailed recommended approach with specific alternative phrasing in << >>. OMIT when tag is 'positive'."
                                },
                                "detailed_why_this_was_good": {
                                    "type": "string",
                                    "description": "REQUIRED when tag is 'positive': detailed explanation of effective execution. OMIT when tag is 'negative'."
                                }
                            },
                            "required": [
                                "pattern_name",
                                "component_name",
                                "id",
                                "title",
                                "opportunity_score",
                                "response_score",
                                "tag",
                                "condensed_opportunity_headline",
                                "condensed_opportunity_quote",
                                "condensed_response_quote",
                                "condensed_actual_response",
                                "detailed_opportunity_headline",
                                "detailed_opportunity_quote",
                                "detailed_response_quote",
                                "detailed_actual_response"
                            ]
                        }
                    }
                },
                "required": ["call_id", "opportunities"],
                "additionalProperties": false
            }
        }
    ]
}